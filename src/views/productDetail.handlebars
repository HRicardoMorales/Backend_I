<h1>{{product.title}}</h1>
<p>Precio: ${{product.price}}</p>
<p>Categoría: {{product.category}}</p>
<p>Stock: {{product.stock}}</p>
<p>Estado: {{#if product.status}}Activo{{else}}Inactivo{{/if}}</p>
<p>{{product.description}}</p>

<div class="row">
    <a class="btn" href="/products{{#if cid}}?cid={{cid}}{{/if}}">⬅️ Volver</a>
    <button class="btn outline" id="add">Agregar al carrito</button>
</div>

<script>
    const cid = new URL(location.href).searchParams.get('cid');
    document.getElementById('add').addEventListener('click', async () => {
        if (!cid) return alert('Falta cid en la URL. Creá un carrito y agregá ?cid=<id> a la URL.');
        const pid = "{{product._id}}";
        const res = await fetch(`/api/carts/${cid}/product/${pid}`, { method: 'POST' });
        if (res.ok) alert('Agregado!');
        else alert('Error al agregar');
    });
</script>